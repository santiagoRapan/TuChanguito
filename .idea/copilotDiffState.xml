<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/tuchanguito/data/PreferencesManager.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/tuchanguito/data/PreferencesManager.kt" />
              <option name="originalContent" value="package com.example.tuchanguito.data&#10;&#10;import android.content.Context&#10;import androidx.datastore.preferences.core.booleanPreferencesKey&#10;import androidx.datastore.preferences.core.edit&#10;import androidx.datastore.preferences.core.stringPreferencesKey&#10;import androidx.datastore.preferences.preferencesDataStore&#10;import kotlinx.coroutines.flow.Flow&#10;import kotlinx.coroutines.flow.map&#10;&#10;private val Context.dataStore by preferencesDataStore(name = &quot;settings&quot;)&#10;&#10;class PreferencesManager(private val context: Context) {&#10;    object Keys {&#10;        val THEME = stringPreferencesKey(&quot;theme&quot;) // system | light | dark&#10;        val REMEMBER_ME = booleanPreferencesKey(&quot;remember_me&quot;)&#10;        val CURRENT_USER_ID = stringPreferencesKey(&quot;current_user_id&quot;)&#10;        val AUTH_TOKEN = stringPreferencesKey(&quot;auth_token&quot;)&#10;        val PENDING_EMAIL = stringPreferencesKey(&quot;pending_email&quot;)&#10;        val PENDING_PASSWORD = stringPreferencesKey(&quot;pending_password&quot;)&#10;        val CURRENT_PANTRY_ID = stringPreferencesKey(&quot;current_pantry_id&quot;)&#10;    }&#10;&#10;    val theme: Flow&lt;String&gt; = context.dataStore.data.map { it[Keys.THEME] ?: &quot;system&quot; }&#10;    val rememberMe: Flow&lt;Boolean&gt; = context.dataStore.data.map { it[Keys.REMEMBER_ME] ?: true }&#10;    val currentUserId: Flow&lt;Long?&gt; = context.dataStore.data.map { it[Keys.CURRENT_USER_ID]?.toLongOrNull() }&#10;    val authToken: Flow&lt;String?&gt; = context.dataStore.data.map { it[Keys.AUTH_TOKEN] }&#10;    val pendingEmail: Flow&lt;String?&gt; = context.dataStore.data.map { it[Keys.PENDING_EMAIL] }&#10;    val pendingPassword: Flow&lt;String?&gt; = context.dataStore.data.map { it[Keys.PENDING_PASSWORD] }&#10;    val currentPantryId: Flow&lt;Long?&gt; = context.dataStore.data.map { it[Keys.CURRENT_PANTRY_ID]?.toLongOrNull() }&#10;&#10;    suspend fun setTheme(value: String) { context.dataStore.edit { it[Keys.THEME] = value } }&#10;    suspend fun setRememberMe(value: Boolean) { context.dataStore.edit { it[Keys.REMEMBER_ME] = value } }&#10;    suspend fun setCurrentUserId(id: Long?) { context.dataStore.edit { if (id == null) it.remove(Keys.CURRENT_USER_ID) else it[Keys.CURRENT_USER_ID] = id.toString() } }&#10;    suspend fun setAuthToken(token: String?) { context.dataStore.edit { if (token == null) it.remove(Keys.AUTH_TOKEN) else it[Keys.AUTH_TOKEN] = token } }&#10;    suspend fun setPendingCredentials(email: String, password: String) { context.dataStore.edit { it[Keys.PENDING_EMAIL] = email; it[Keys.PENDING_PASSWORD] = password } }&#10;    suspend fun clearPendingCredentials() { context.dataStore.edit { it.remove(Keys.PENDING_EMAIL); it.remove(Keys.PENDING_PASSWORD) } }&#10;    suspend fun setCurrentPantryId(id: Long?) { context.dataStore.edit { if (id == null) it.remove(Keys.CURRENT_PANTRY_ID) else it[Keys.CURRENT_PANTRY_ID] = id.toString() } }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.tuchanguito.data&#10;&#10;import android.content.Context&#10;import androidx.datastore.preferences.core.booleanPreferencesKey&#10;import androidx.datastore.preferences.core.edit&#10;import androidx.datastore.preferences.core.stringPreferencesKey&#10;import androidx.datastore.preferences.preferencesDataStore&#10;import kotlinx.coroutines.flow.Flow&#10;import kotlinx.coroutines.flow.map&#10;&#10;private val Context.dataStore by preferencesDataStore(name = &quot;settings&quot;)&#10;&#10;class PreferencesManager(private val context: Context) {&#10;    object Keys {&#10;        val THEME = stringPreferencesKey(&quot;theme&quot;) // system | light | dark&#10;        val REMEMBER_ME = booleanPreferencesKey(&quot;remember_me&quot;)&#10;        val CURRENT_USER_ID = stringPreferencesKey(&quot;current_user_id&quot;)&#10;        val AUTH_TOKEN = stringPreferencesKey(&quot;auth_token&quot;)&#10;        val PENDING_EMAIL = stringPreferencesKey(&quot;pending_email&quot;)&#10;        val PENDING_PASSWORD = stringPreferencesKey(&quot;pending_password&quot;)&#10;        val CURRENT_PANTRY_ID = stringPreferencesKey(&quot;current_pantry_id&quot;)&#10;        val LAST_OPENED_LIST_ID = stringPreferencesKey(&quot;last_opened_list_id&quot;)&#10;    }&#10;&#10;    val theme: Flow&lt;String&gt; = context.dataStore.data.map { it[Keys.THEME] ?: &quot;system&quot; }&#10;    val rememberMe: Flow&lt;Boolean&gt; = context.dataStore.data.map { it[Keys.REMEMBER_ME] ?: true }&#10;    val currentUserId: Flow&lt;Long?&gt; = context.dataStore.data.map { it[Keys.CURRENT_USER_ID]?.toLongOrNull() }&#10;    val authToken: Flow&lt;String?&gt; = context.dataStore.data.map { it[Keys.AUTH_TOKEN] }&#10;    val pendingEmail: Flow&lt;String?&gt; = context.dataStore.data.map { it[Keys.PENDING_EMAIL] }&#10;    val pendingPassword: Flow&lt;String?&gt; = context.dataStore.data.map { it[Keys.PENDING_PASSWORD] }&#10;    val currentPantryId: Flow&lt;Long?&gt; = context.dataStore.data.map { it[Keys.CURRENT_PANTRY_ID]?.toLongOrNull() }&#10;    val lastOpenedListId: Flow&lt;Long?&gt; = context.dataStore.data.map { it[Keys.LAST_OPENED_LIST_ID]?.toLongOrNull() }&#10;&#10;    suspend fun setTheme(value: String) { context.dataStore.edit { it[Keys.THEME] = value } }&#10;    suspend fun setRememberMe(value: Boolean) { context.dataStore.edit { it[Keys.REMEMBER_ME] = value } }&#10;    suspend fun setCurrentUserId(id: Long?) { context.dataStore.edit { if (id == null) it.remove(Keys.CURRENT_USER_ID) else it[Keys.CURRENT_USER_ID] = id.toString() } }&#10;    suspend fun setAuthToken(token: String?) { context.dataStore.edit { if (token == null) it.remove(Keys.AUTH_TOKEN) else it[Keys.AUTH_TOKEN] = token } }&#10;    suspend fun setPendingCredentials(email: String, password: String) { context.dataStore.edit { it[Keys.PENDING_EMAIL] = email; it[Keys.PENDING_PASSWORD] = password } }&#10;    suspend fun clearPendingCredentials() { context.dataStore.edit { it.remove(Keys.PENDING_EMAIL); it.remove(Keys.PENDING_PASSWORD) } }&#10;    suspend fun setCurrentPantryId(id: Long?) { context.dataStore.edit { if (id == null) it.remove(Keys.CURRENT_PANTRY_ID) else it[Keys.CURRENT_PANTRY_ID] = id.toString() } }&#10;    suspend fun setLastOpenedListId(id: Long?) { context.dataStore.edit { if (id == null) it.remove(Keys.LAST_OPENED_LIST_ID) else it[Keys.LAST_OPENED_LIST_ID] = id.toString() } }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/tuchanguito/ui/navigation/IconsProbe.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/tuchanguito/ui/navigation/IconsProbe.kt" />
              <option name="originalContent" value="&#10;&#10;&#10;&#10;" />
              <option name="updatedContent" value="// Archivo de prueba temporal para verificar disponibilidad de íconos de Material.&#10;// Ya no se utiliza y se deja intencionalmente vacío para evitar imports innecesarios." />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/tuchanguito/ui/screens/home/HomeScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/tuchanguito/ui/screens/home/HomeScreen.kt" />
              <option name="originalContent" value="package com.example.tuchanguito.ui.screens.home&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.res.stringResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import com.example.tuchanguito.R&#10;import com.example.tuchanguito.data.AppRepository&#10;import com.example.tuchanguito.data.model.ListItem&#10;import com.example.tuchanguito.data.model.ShoppingList&#10;import com.example.tuchanguito.ui.theme.PrimaryTextBlue&#10;import com.example.tuchanguito.ui.theme.ButtonBlue&#10;import androidx.compose.foundation.layout.size&#10;import androidx.compose.foundation.layout.Box&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.Add&#10;import androidx.compose.ui.platform.LocalConfiguration&#10;import android.content.res.Configuration&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.verticalScroll&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun HomeScreen(&#10;    onOpenList: (Long) -&gt; Unit,&#10;    onNewProduct: () -&gt; Unit,&#10;    onConfigureCategories: () -&gt; Unit,&#10;) {&#10;    val context = androidx.compose.ui.platform.LocalContext.current&#10;    val repo = remember { AppRepository.get(context) }&#10;&#10;    val lists by repo.activeLists().collectAsState(initial = emptyList())&#10;    val active = lists.firstOrNull()&#10;    val items by if (active != null) {&#10;        repo.itemsForList(active.id).collectAsState(initial = emptyList())&#10;    } else remember { mutableStateOf(emptyList()) }&#10;&#10;    val newListLabel = stringResource(id = R.string.new_list)&#10;    val newProductLabel = stringResource(id = R.string.new_product)&#10;    val configureCategoriesLabel = stringResource(id = R.string.configure_categories)&#10;    val lowStockLabel = stringResource(id = R.string.low_stock)&#10;&#10;    Scaffold(&#10;        topBar = { TopAppBar(title = { Text(stringResource(id = R.string.app_name), color = PrimaryTextBlue) }) },&#10;        contentWindowInsets = WindowInsets.systemBars&#10;    ) { padding -&gt;&#10;        val isLandscape = LocalConfiguration.current.orientation == Configuration.ORIENTATION_LANDSCAPE&#10;        val scrollMod = if (isLandscape) Modifier.verticalScroll(rememberScrollState()) else Modifier&#10;        Column(Modifier.fillMaxSize().then(scrollMod).padding(padding).padding(16.dp)) {&#10;            ActiveListCard(active, items, onOpenList)&#10;            Spacer(Modifier.height(16.dp))&#10;            Row(Modifier.fillMaxWidth(), horizontalArrangement = Arrangement.SpaceEvenly) {&#10;                QuickAction(newListLabel) { onOpenList(newList()) }&#10;                QuickAction(newProductLabel, onNewProduct)&#10;                QuickAction(configureCategoriesLabel, onConfigureCategories)&#10;            }&#10;            Spacer(Modifier.height(16.dp))&#10;            Text(lowStockLabel, style = MaterialTheme.typography.titleLarge)&#10;            // In a full implementation, list pantry items under stock threshold&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun ActiveListCard(active: ShoppingList?, items: List&lt;ListItem&gt;, onOpen: (Long) -&gt; Unit) {&#10;    val acquiredCount = items.count { it.acquired }&#10;    val progress = if (items.isEmpty()) 0f else acquiredCount.toFloat() / items.size.toFloat()&#10;    Surface(Modifier.fillMaxWidth(), shape = RoundedCornerShape(16.dp), color = ButtonBlue) {&#10;        Column(Modifier.padding(16.dp)) {&#10;            Text(active?.title ?: stringResource(id = R.string.default_active_list_title), color = Color.White, style = MaterialTheme.typography.headlineSmall, fontWeight = FontWeight.Bold)&#10;            Spacer(Modifier.height(8.dp))&#10;            LinearProgressIndicator(progress = { progress }, modifier = Modifier.fillMaxWidth().clip(RoundedCornerShape(8.dp)), color = Color.White, trackColor = Color(0xFF8ECBF5))&#10;            Spacer(Modifier.height(8.dp))&#10;            Row(Modifier.fillMaxWidth(), horizontalArrangement = Arrangement.SpaceBetween) {&#10;                Text(&quot;${items.size - acquiredCount} pendientes&quot;, color = Color.White)&#10;                Text(&quot;$${total(items)}&quot;, color = Color.White)&#10;            }&#10;            Spacer(Modifier.height(8.dp))&#10;            Button(onClick = { if (active != null) onOpen(active.id) }, colors = ButtonDefaults.buttonColors(containerColor = ButtonBlue, contentColor = Color.White)) { Text(stringResource(id = R.string.open_label)) }&#10;        }&#10;    }&#10;}&#10;&#10;private fun total(items: List&lt;ListItem&gt;): Int = items.sumOf { it.quantity * 100 } // demo pricing&#10;&#10;@Composable&#10;private fun QuickAction(label: String, onClick: () -&gt; Unit) {&#10;    Surface(onClick = onClick, tonalElevation = 1.dp, shape = RoundedCornerShape(12.dp)) {&#10;        Column(Modifier.padding(16.dp), horizontalAlignment = Alignment.CenterHorizontally) {&#10;            Surface(&#10;                modifier = Modifier.size(52.dp).clip(RoundedCornerShape(26.dp)),&#10;                color = ButtonBlue,&#10;                contentColor = Color.White,&#10;                tonalElevation = 0.dp&#10;            ) {&#10;                Box(contentAlignment = Alignment.Center) {&#10;                    Icon(imageVector = Icons.Filled.Add, contentDescription = &quot;add&quot;, tint = Color.White)&#10;                }&#10;            }&#10;            Spacer(Modifier.height(8.dp))&#10;            Text(label, style = MaterialTheme.typography.bodyMedium)&#10;        }&#10;    }&#10;}&#10;&#10;private fun newList(): Long {&#10;     // Create a new list synchronously for demo with runBlocking in real use; here we fake an id 0 and trigger navigation afterwards&#10;     // For simplicity in Composables we avoid blocking; let Lists screen handle creation. Here we just return -1 to open Lists page&#10;     return -1&#10; }&#10;" />
              <option name="updatedContent" value="package com.example.tuchanguito.ui.screens.home&#10;&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.res.stringResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import com.example.tuchanguito.R&#10;import com.example.tuchanguito.data.AppRepository&#10;import com.example.tuchanguito.data.PreferencesManager&#10;import com.example.tuchanguito.data.model.ListItem&#10;import com.example.tuchanguito.data.model.ShoppingList&#10;import com.example.tuchanguito.ui.theme.PrimaryTextBlue&#10;import com.example.tuchanguito.ui.theme.ButtonBlue&#10;import androidx.compose.foundation.layout.Box&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.Add&#10;import androidx.compose.ui.platform.LocalConfiguration&#10;import kotlinx.coroutines.launch&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.foundation.layout.size&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material3.TextButton&#10;import androidx.compose.material3.OutlinedTextField&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun HomeScreen(&#10;    onOpenList: (Long) -&gt; Unit,&#10;    onNewProduct: () -&gt; Unit,&#10;    onConfigureCategories: () -&gt; Unit,&#10;) {&#10;    val context = LocalContext.current&#10;    val repo = remember { AppRepository.get(context) }&#10;    val prefs = remember { PreferencesManager(context) }&#10;&#10;    val lists by repo.activeLists().collectAsState(initial = emptyList())&#10;    val lastOpened by prefs.lastOpenedListId.collectAsState(initial = null)&#10;    // Prefer last opened; if none, choose the most recently created (by id). If still none, do not show a card.&#10;    val active = lists.firstOrNull { it.id == lastOpened } ?: lists.maxByOrNull { it.id }&#10;&#10;    val newListLabel = stringResource(id = R.string.new_list)&#10;    val newProductLabel = stringResource(id = R.string.new_product)&#10;    val lowStockLabel = stringResource(id = R.string.low_stock)&#10;    // Hoisted strings for use inside coroutines / non-composable lambdas&#10;    val createListDialogTitle = stringResource(id = R.string.create_list_dialog_title)&#10;    val listAlreadyExists = stringResource(id = R.string.list_already_exists)&#10;    val createErrorLabel = stringResource(id = R.string.create_error)&#10;    val createLabel = stringResource(id = R.string.create)&#10;    val cancelLabel = stringResource(id = R.string.cancel)&#10;    val newProductTitle = stringResource(id = R.string.new_product)&#10;&#10;    val coroutineScope = rememberCoroutineScope()&#10;    val snackbarHost = remember { SnackbarHostState() }&#10;&#10;    var showNewListDialog by remember { mutableStateOf(false) }&#10;    var showNewProductDialog by remember { mutableStateOf(false) }&#10;&#10;    Scaffold(&#10;        topBar = { TopAppBar(title = { Text(stringResource(id = R.string.app_name), color = PrimaryTextBlue) }) },&#10;        snackbarHost = { SnackbarHost(hostState = snackbarHost) },&#10;        contentWindowInsets = WindowInsets.systemBars&#10;    ) { padding -&gt;&#10;        val isLandscape = LocalConfiguration.current.orientation == android.content.res.Configuration.ORIENTATION_LANDSCAPE&#10;        val scrollMod = if (isLandscape) Modifier.verticalScroll(rememberScrollState()) else Modifier&#10;        Column(Modifier.fillMaxSize().then(scrollMod).padding(padding).padding(16.dp)) {&#10;            if (active != null) {&#10;                val activeItems by repo.itemsForList(active.id).collectAsState(initial = emptyList())&#10;                ActiveListCard(active, activeItems) { id -&gt;&#10;                    coroutineScope.launch { prefs.setLastOpenedListId(id) }&#10;                    onOpenList(id)&#10;                }&#10;                Spacer(Modifier.height(16.dp))&#10;            }&#10;&#10;            // Center the two quick action buttons&#10;            Row(Modifier.fillMaxWidth(), horizontalArrangement = Arrangement.Center) {&#10;                Row(Modifier.wrapContentWidth(), horizontalArrangement = Arrangement.spacedBy(16.dp)) {&#10;                    QuickAction(newListLabel) { showNewListDialog = true }&#10;                    QuickAction(newProductLabel) { showNewProductDialog = true }&#10;                }&#10;            }&#10;&#10;            // New List AlertDialog (matches ListsScreen style)&#10;            if (showNewListDialog) {&#10;                var newName by remember { mutableStateOf(&quot;&quot;) }&#10;                val nameTrim = newName.trim()&#10;                val duplicate = lists.any { it.title.equals(nameTrim, ignoreCase = true) }&#10;                var busy by remember { mutableStateOf(false) }&#10;&#10;                AlertDialog(&#10;                    onDismissRequest = { if (!busy) { showNewListDialog = false; newName = &quot;&quot; } },&#10;                    confirmButton = {&#10;                        TextButton(onClick = {&#10;                            coroutineScope.launch {&#10;                                busy = true&#10;                                if (duplicate) { snackbarHost.showSnackbar(listAlreadyExists); busy = false; return@launch }&#10;                                val id = try { repo.createList(nameTrim) } catch (t: Throwable) { snackbarHost.showSnackbar(t.message ?: createErrorLabel); 0L } finally { busy = false }&#10;                                if (id &gt; 0) { showNewListDialog = false; newName = &quot;&quot;; coroutineScope.launch { prefs.setLastOpenedListId(id) }; onOpenList(id) }&#10;                            }&#10;                        }, enabled = nameTrim.isNotBlank() &amp;&amp; !busy &amp;&amp; !duplicate) { Text(createLabel) }&#10;                    },&#10;                    dismissButton = { TextButton(onClick = { if (!busy) { showNewListDialog = false; newName = &quot;&quot; } }) { Text(cancelLabel) } },&#10;                    title = { Text(createListDialogTitle) },&#10;                    text = {&#10;                        OutlinedTextField(&#10;                            value = newName,&#10;                            onValueChange = { newName = it },&#10;                            label = { Text(stringResource(id = R.string.list_name_label)) },&#10;                            singleLine = true,&#10;                            isError = duplicate,&#10;                            supportingText = { if (duplicate) Text(listAlreadyExists) }&#10;                        )&#10;                    }&#10;                )&#10;            }&#10;&#10;            // New Product AlertDialog (matches ProductsScreen style)&#10;            if (showNewProductDialog) {&#10;                var name by remember { mutableStateOf(&quot;&quot;) }&#10;                var priceText by remember { mutableStateOf(&quot;&quot;) }&#10;                var unit by remember { mutableStateOf(&quot;&quot;) }&#10;                var busy by remember { mutableStateOf(false) }&#10;                val valid = name.isNotBlank()&#10;&#10;                AlertDialog(&#10;                    onDismissRequest = { if (!busy) showNewProductDialog = false },&#10;                    confirmButton = {&#10;                        TextButton(onClick = {&#10;                            coroutineScope.launch {&#10;                                busy = true&#10;                                try {&#10;                                    val price = priceText.toDoubleOrNull() ?: 0.0&#10;                                    repo.createProductRemote(name.trim(), price, unit.ifBlank { &quot;u&quot; }, null)&#10;                                    showNewProductDialog = false&#10;                                    onNewProduct()&#10;                                } catch (t: Throwable) {&#10;                                    snackbarHost.showSnackbar(t.message ?: createErrorLabel)&#10;                                } finally { busy = false }&#10;                            }&#10;                        }, enabled = valid &amp;&amp; !busy) { Text(createLabel) }&#10;                    },&#10;                    dismissButton = { TextButton(onClick = { if (!busy) showNewProductDialog = false }) { Text(cancelLabel) } },&#10;                    title = { Text(newProductTitle) },&#10;                    text = {&#10;                        Column(verticalArrangement = Arrangement.spacedBy(8.dp)) {&#10;                            OutlinedTextField(value = name, onValueChange = { name = it }, label = { Text(stringResource(id = R.string.name_label)) }, singleLine = true)&#10;                            OutlinedTextField(value = priceText, onValueChange = { priceText = it.filter { ch -&gt; ch.isDigit() || ch == '.' } }, label = { Text(stringResource(id = R.string.price_label)) }, singleLine = true)&#10;                            OutlinedTextField(value = unit, onValueChange = { unit = it }, label = { Text(stringResource(id = R.string.unit_label)) }, singleLine = true)&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;&#10;            Spacer(Modifier.height(16.dp))&#10;            Text(lowStockLabel, style = MaterialTheme.typography.titleLarge)&#10;            // Additional content (pantry low stock) could go here&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun ActiveListCard(active: ShoppingList?, items: List&lt;ListItem&gt;, onOpen: (Long) -&gt; Unit) {&#10;    val acquiredCount = items.count { it.acquired }&#10;    val progress = if (items.isEmpty()) 0f else acquiredCount.toFloat() / items.size.toFloat()&#10;    Surface(Modifier.fillMaxWidth(), shape = RoundedCornerShape(16.dp), color = ButtonBlue) {&#10;        Column(Modifier.padding(16.dp)) {&#10;            Text(active?.title ?: stringResource(id = R.string.default_active_list_title), color = Color.White, style = MaterialTheme.typography.headlineSmall, fontWeight = FontWeight.Bold)&#10;            Spacer(Modifier.height(8.dp))&#10;            LinearProgressIndicator(progress = progress, modifier = Modifier.fillMaxWidth().clip(RoundedCornerShape(8.dp)), color = Color.White, trackColor = Color(0xFF8ECBF5))&#10;            Spacer(Modifier.height(8.dp))&#10;            Row(Modifier.fillMaxWidth(), horizontalArrangement = Arrangement.SpaceBetween) {&#10;                Text(&quot;${items.size - acquiredCount} pendientes&quot;, color = Color.White)&#10;                Text(&quot;$${total(items)}&quot;, color = Color.White)&#10;            }&#10;            Spacer(Modifier.height(8.dp))&#10;            Button(onClick = { if (active != null) onOpen(active.id) }, colors = ButtonDefaults.buttonColors(containerColor = ButtonBlue, contentColor = Color.White)) { Text(stringResource(id = R.string.open_label)) }&#10;        }&#10;    }&#10;}&#10;&#10;private fun total(items: List&lt;ListItem&gt;): Int = items.sumOf { it.quantity * 100 } // demo pricing&#10;&#10;@Composable&#10;private fun QuickAction(label: String, onClick: () -&gt; Unit) {&#10;    Surface(onClick = onClick, tonalElevation = 1.dp, shape = RoundedCornerShape(12.dp)) {&#10;        Column(Modifier.padding(16.dp), horizontalAlignment = Alignment.CenterHorizontally) {&#10;            Surface(&#10;                modifier = Modifier.size(52.dp).clip(CircleShape),&#10;                color = ButtonBlue,&#10;                contentColor = Color.White,&#10;                tonalElevation = 0.dp&#10;            ) {&#10;                Box(contentAlignment = Alignment.Center) {&#10;                    Icon(imageVector = Icons.Filled.Add, contentDescription = &quot;add&quot;, tint = Color.White)&#10;                }&#10;            }&#10;            Spacer(Modifier.height(8.dp))&#10;            Text(label, style = MaterialTheme.typography.bodyMedium)&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>